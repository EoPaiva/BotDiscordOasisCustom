# Bot de Gerenciamento Multifuncional OasisCustom

<p align="center">
  <img src="https://img.shields.io/badge/status-ativo-brightgreen" alt="Status do Projeto">
  <img src="https://img.shields.io/badge/Python-3.10%2B-blue" alt="Python">
  <img src="https://img.shields.io/badge/discord.py-2.3.2-7289DA" alt="discord.py">
  <img src="https://img.shields.io/badge/licen√ßa-MIT-lightgrey" alt="Licen√ßa">
</p>

<p align="center">
  Uma solu√ß√£o de automa√ß√£o robusta e modular para servidores Discord, projetada para gerenciar membros, atividades e modera√ß√£o de forma eficiente e profissional.
</p>

---

## üìú Sobre o Projeto

Este bot foi desenvolvido para ser a espinha dorsal administrativa de comunidades complexas, como servidores de **Roleplay (RP)** ou **guilds de jogos**. Ele centraliza funcionalidades essenciais, substituindo m√∫ltiplos bots com uma solu√ß√£o modular, com gerenciamento via banco de dados e automa√ß√£o completa.

Cada m√≥dulo foi projetado para ser intuitivo, utilizando intera√ß√µes do Discord como **bot√µes** e **formul√°rios** para facilitar a experi√™ncia tanto para membros quanto para administradores.

---

---

### **üõ†Ô∏è Tecnologias e Ferramentas Utilizadas**

Este projeto foi constru√≠do com foco em desempenho, modularidade e confiabilidade, utilizando as seguintes tecnologias:

<p align="left">
  <a href="https://skillicons.dev">
    <img src="https://skillicons.dev/icons?i=python,sqlite,git,discord,vscode" />
  </a>
</p>

* **Linguagem Principal: Python**
    * Todo o bot foi desenvolvido em Python, uma linguagem poderosa e vers√°til, ideal para projetos de automa√ß√£o e back-end.

* **Biblioteca Principal: `discord.py`**
    * Utilizamos a biblioteca `discord.py` para toda a intera√ß√£o com a API do Discord. Sua natureza ass√≠ncrona garante que o bot possa lidar com m√∫ltiplas a√ß√µes simultaneamente sem travar, oferecendo uma experi√™ncia fluida para os usu√°rios.

* **Banco de Dados: SQLite (via `aiosqlite`)**
    * Para persist√™ncia de dados (registros de farm, aus√™ncias, caixa, etc.), foi escolhido o SQLite.
    * **Por qu√™?** √â um banco de dados leve, r√°pido e que n√£o requer um servidor separado, sendo armazenado em um √∫nico arquivo (`.db`) junto com o bot.
    * A biblioteca `aiosqlite` foi usada para garantir que todas as opera√ß√µes de banco de dados sejam ass√≠ncronas, mantendo o bot responsivo.

* **Ferramentas de Desenvolvimento e Configura√ß√£o**
    * **Git & GitHub:** Para controle de vers√£o e gerenciamento do c√≥digo-fonte.
    * **JSON:** Utilizado para os arquivos de configura√ß√£o (`config.json`, etc.), permitindo uma personaliza√ß√£o f√°cil de todos os IDs e par√¢metros do bot sem precisar alterar o c√≥digo Python.
    * **`.env`:** Para o armazenamento seguro de informa√ß√µes sens√≠veis, como o token do bot.

---

## ‚ú® Funcionalidades Principais

### üìù Sistema de Registro com Aprova√ß√£o

- **Auto-Role na Entrada**: Novos membros recebem um cargo tempor√°rio ao entrar.
- **Painel Interativo**: Um comando `/painel_registro` cria um painel com um bot√£o para iniciar o registro.
- **Formul√°rio Modal**: Coleta informa√ß√µes detalhadas do novo membro (Nome, ID, etc.).
- **Aprova√ß√£o da Staff**: A staff pode aprovar ou negar o registro com um clique.
- **Automa√ß√£o Completa**: Ap√≥s aprova√ß√£o, o bot altera o apelido do membro e atribui os cargos finais.

### ‚úàÔ∏è Sistema de Aus√™ncia

- **Solicita√ß√£o Formal**: Membros solicitam aus√™ncia informando o motivo e data de retorno.
- **Cargo Autom√°tico**: O membro recebe o cargo "Ausente".
- **Retorno Agendado**: O bot monitora o retorno e remove o cargo automaticamente.

### üåæ Sistema de Tickets de Farm

- **Canais Privados**: Membros criam tickets individuais para registrar entregas.
- **Entrega com Provas**: Formul√°rio para solicitar detalhes da entrega e envio de imagem como prova.
- **Aprova√ß√£o da Staff**: Cada entrega √© enviada para an√°lise da staff.
- **Ranking Autom√°tico**: Um ranking das entregas aprovadas √© mantido e atualizado automaticamente.

### üëÆ Sistema de Gest√£o de RH

- **Painel Centralizado**: Um painel √∫nico para a√ß√µes como "Desligamento", "Promo√ß√£o" e "Rebaixamento".
- **Hierarquia Configur√°vel**: Defina uma cadeia de cargos e prefixos no arquivo de configura√ß√£o.
- **Automa√ß√£o de A√ß√µes**: Demiss√£o, promo√ß√µes e rebaixamentos s√£o autom√°ticos.
- **Logs Detalhados**: Registra todas as a√ß√µes em um canal privado para a staff.

### üÜò Sistema de Resgate

- **Pedido de Ajuda**: Membros podem solicitar ajuda de emerg√™ncia.
- **Coleta de Informa√ß√µes**: Formul√°rio para coletar dados de localiza√ß√£o e problema, seguido de uma imagem.
- **Alerta @everyone**: Envia um alerta com todos os detalhes no canal de resgate.

---

## üöÄ Come√ßando

### Pr√©-requisitos

- Python 3.10 ou superior
- Conta de Bot no [Portal de Desenvolvedores do Discord](https://discord.com/developers/docs/intro) com as Privileged Gateway Intents ativadas

### Guia de Instala√ß√£o

1. Clone o reposit√≥rio:

    git clone [URL_DO_SEU_REPOSITORIO]
    cd [NOME_DA_PASTA]

2. Crie um ambiente virtual (recomendado):

    python -m venv venv
    # Windows
    .\venv\Scripts\activate
    # Linux/macOS
    source venv/bin/activate

3. Instale as depend√™ncias:

    pip install -r requirements.txt

4. Configure o Token do Bot:

- Crie um arquivo chamado `.env` na pasta principal.
- Dentro dele, adicione a linha:

    TOKEN="SEU_TOKEN_AQUI"

5. Configure os IDs do Servidor:

- Abra o arquivo `config.json` e preencha os IDs dos canais, categorias e cargos.
- Abra o arquivo `ranking_config.json` (ele pode estar vazio, o bot ir√° gerenci√°-lo).

6. Convide o Bot para o seu servidor com as permiss√µes necess√°rias.

---

## ‚öôÔ∏è Uso

### Iniciar o bot

Para iniciar o bot, execute o seguinte comando:

    python main.py

### Enviar os Pain√©is (Comandos de Admin)

V√° para os canais de texto correspondentes configurados no `config.json` e use os comandos para implantar os pain√©is de intera√ß√£o:

    /painel_registro
    /painel_ausencia
    /painel_farm
    /painel_rh
    /painel_resgate

### Gerenciar o Ranking de Farm (Comandos de Admin)

    /ranking_iniciar  # Inicia o ranking no canal configurado.
    /ranking_parar    # Desativa o ranking.

---






### **Hist√≥rico de Vers√µes e Atualiza√ß√µes**

*Atualiza√ß√µes implementadas em 18-19 de Setembro de 2025.*

### ‚ú® Novas Funcionalidades

* **Sistema de Hierarquia Din√¢mica**
    * Adicionado um novo m√≥dulo para exibir a estrutura hier√°rquica completa da equipe em um canal dedicado.
    * O painel √© esteticamente formatado, mostrando cada cargo (com t√≠tulo e emoji customizados) e a lista de membros correspondente.
    * A hierarquia √© atualizada automaticamente sempre que um membro √© registrado, promovido, rebaixado ou demitido.
    * Comandos de admin dispon√≠veis: `/hierarquia` para postar ou for√ßar uma atualiza√ß√£o.

* **Sistema de Controle de Caixa**
    * Criado um novo m√≥dulo para registrar transa√ß√µes financeiras com provas.
    * Implementado um painel interativo com bot√µes de "Depositar" e "Sacar" que exibe o saldo em tempo real.
    * A staff preenche um formul√°rio com valor/motivo e anexa uma imagem como prova.
    * Todas as transa√ß√µes s√£o salvas em banco de dados e um resumo √© postado em um canal de logs.
    * Comandos dispon√≠veis: `/painel_caixa` (admin), `/saldo` (staff).

* **M√≥dulo de Comandos Utilit√°rios**
    * Adicionado um novo conjunto de comandos gerais e de modera√ß√£o, incluindo:
        * **Gerais**: `/ajuda`, `/sobre`, `/status`, `/version`, `/erro` (com formul√°rio), `/enquete`.
        * **Modera√ß√£o (Staff)**: `/limpar`, `/banir`, `/desbanir`, `/notificar`.
        * **Administrativo**: `/relatorio` (gera um resumo das atividades de Farm e Caixa).

### ‚öôÔ∏è Melhorias e Altera√ß√µes

* **Atualiza√ß√£o Autom√°tica de Apelidos (Sistema de RH)**
    * O sistema de Promo√ß√£o e Rebaixamento agora altera automaticamente o prefixo no apelido do membro para refletir seu novo cargo na hierarquia.
    * A configura√ß√£o da hierarquia foi unificada em uma estrutura mais robusta no `config.json`.

* **Comando de Verifica√ß√£o de Apelidos (Sistema de RH)**
    * Adicionado o comando de administrador `/verificar_apelidos`.
    * Esta ferramenta varre todos os membros do servidor e corrige automaticamente qualquer apelido que n√£o esteja alinhado com o cargo mais alto do membro na hierarquia.

* **M√∫ltiplas Mensagens para Hierarquia**
    * O sistema de hierarquia foi otimizado para lidar com um grande n√∫mero de membros. Se a lista de membros for muito longa para uma √∫nica mensagem, o bot agora a divide em v√°rias mensagens para garantir que toda a equipe seja exibida.

### üêõ Corre√ß√µes de Bugs

* **Corrigido Erro de 'M√≥dulo n√£o Encontrado' (`ModuleNotFoundError`)**: Resolvido um problema de importa√ß√£o que impedia os m√≥dulos (`Cogs`) de carregarem corretamente.
* **Corrigido Erro de 'Tamanho do Embed' (`Embed Size Exceeds Limit`)**: Resolvido o erro cr√≠tico que ocorria ao tentar exibir uma hierarquia com muitos membros.
* **Corrigido Erro de Codifica√ß√£o (`Charmap Codec Error`)**: Solucionado um problema de codifica√ß√£o de caracteres no `config.json` que impedia o bot de iniciar.
* **Corrigido Erro de 'Coluna n√£o Encontrada' (`No Such Column`)**: Corrigido um problema de dessincroniza√ß√£o entre o c√≥digo e o banco de dados.
* **Corrigido Erro de Imagens Quebradas**: A l√≥gica de anexo de imagens nos sistemas de Resgate e Caixa foi reescrita para usar arquivos permanentes em vez de links tempor√°rios do Discord, garantindo que as imagens nunca expirem.


## üìÅ Estrutura do Projeto
```
.
‚îú‚îÄ‚îÄ üìÑ .env                   # Guarda o token secreto do seu bot.
‚îú‚îÄ‚îÄ üìÑ config.json             # O "painel de controle" principal, com todos os IDs e configura√ß√µes.
‚îú‚îÄ‚îÄ üìÑ database.py             # Gerencia o banco de dados (SQLite) para todos os sistemas.
‚îú‚îÄ‚îÄ üìÑ main.py                 # O arquivo principal que voc√™ executa para iniciar o bot.
‚îú‚îÄ‚îÄ üìÑ ranking_config.json     # Salva o ID da mensagem do ranking de farm para atualiza√ß√£o autom√°tica.
‚îú‚îÄ‚îÄ üìÑ requirements.txt       # Lista de bibliotecas que o bot precisa para funcionar.
‚îî‚îÄ‚îÄ üìÅ cogs/                   # Pasta onde cada sistema do bot √© organizado como um m√≥dulo.
    ‚îú‚îÄ‚îÄ üìÑ absence_system.py       # L√≥gica para o sistema de aus√™ncia.
    ‚îú‚îÄ‚îÄ üìÑ cash_control.py       # L√≥gica para o controle de caixa.
    ‚îú‚îÄ‚îÄ üìÑ farm_system.py        # L√≥gica para os tickets e ranking de farm.
    ‚îú‚îÄ‚îÄ üìÑ hierarchy_system.py     # L√≥gica para o painel de hierarquia din√¢mico.
    ‚îú‚îÄ‚îÄ üìÑ hr_system.py            # L√≥gica para demiss√£o, promo√ß√£o e verifica√ß√£o de apelidos.
    ‚îú‚îÄ‚îÄ üìÑ registration_system.py  # L√≥gica para o registro e aprova√ß√£o de novos membros.
    ‚îú‚îÄ‚îÄ üìÑ rescue_system.py        # L√≥gica para o sistema de pedido de ajuda.
    ‚îî‚îÄ‚îÄ üìÑ utility_commands.py     # Cont√©m todos os comandos gerais e de modera√ß√£o (/ajuda, /limpar, etc).

    

